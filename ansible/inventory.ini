# ============================================================
# ANSIBLE INVENTORY FILE
# ============================================================
# This file lists all servers (hosts) that Ansible will manage.
# Format: INI (simple key=value format)
#
# Official docs: https://docs.ansible.com/ansible/latest/user_guide/intro_inventory.html
# ============================================================

# ------------------------------------------------------------
# SERVER GROUPS
# ------------------------------------------------------------
# Groups organize servers by purpose/role
# You can run playbooks on specific groups
# Example: ansible-playbook site.yml --limit app_servers
# ------------------------------------------------------------

# ============================================================
# [app_servers] - Application Server Group
# ============================================================
# This group contains VM1 - the server running the Flask app
# ============================================================

[app_servers]

# ------------------------------------------------------------
# VM1 - App Server (Flask Application)
# ------------------------------------------------------------
# Hostname: vm1 (friendly name used in playbooks)
#
# CONNECTION PARAMETERS:
# - ansible_host: The actual IP address or hostname of the server
# - ansible_user: SSH username to connect with
# - ansible_ssh_private_key_file: Path to SSH private key (.pem file)
# - ansible_python_interpreter: Python path on remote server (optional)
# ------------------------------------------------------------

vm1 ansible_host=18.201.228.136 ansible_user=admin ansible_ssh_private_key_file=~/.ssh/klinkr-key.pem

# ------------------------------------------------------------
# EXPLANATION OF EACH PARAMETER:
# ------------------------------------------------------------
#
# vm1
#   └─> Inventory hostname (friendly name)
#       What it is: A label you use to reference this server
#       Usage: ansible vm1 -m ping
#       Can be anything: vm1, app-server, production, etc.
#
# ansible_host=YOUR_VM1_PUBLIC_IP
#   └─> Actual IP address or DNS name
#       What it is: Where Ansible connects to (the real address)
#       Example: ansible_host=54.123.45.67
#       Get from: terraform output app_server_public_ip
#       Can also be: Domain name (ansible_host=app.example.com)
#
# ansible_user=admin
#   └─> SSH username
#       What it is: Which user account to log in as
#       For Debian 12: admin (default)
#       For Ubuntu: ubuntu
#       For Amazon Linux: ec2-user
#       For CentOS: centos
#       Why admin? Debian's default user with sudo privileges
#
# ansible_ssh_private_key_file=~/.ssh/your-key-name.pem
#   └─> Path to SSH private key
#       What it is: Your .pem file for authentication
#       Example: ~/.ssh/klinkr-key.pem
#       Windows path: C:/Users/YourName/.ssh/key.pem
#       Must match: The key you specified in Terraform (ssh_key_name)
#       Permissions: Must be 400 (read-only for owner)
#
# ------------------------------------------------------------

# ------------------------------------------------------------
# HOW TO FILL IN YOUR DETAILS:
# ------------------------------------------------------------
#
# STEP 1: Get VM1's Public IP
# Run this command in the terraform/ directory:
#   terraform output app_server_public_ip
# Example output: 54.123.45.67
#
# STEP 2: Find Your SSH Key Path
# Location (Linux/Mac/WSL): ~/.ssh/your-key.pem
# Location (Windows): C:/Users/YourName/.ssh/your-key.pem
# Key name from Terraform: Check terraform.tfvars -> ssh_key_name
#
# STEP 3: Update the Line Above
# Replace:
#   YOUR_VM1_PUBLIC_IP → Your actual IP (e.g., 54.123.45.67)
#   your-key-name.pem → Your actual key filename (e.g., klinkr-key.pem)
#
# EXAMPLE (filled in):
#   vm1 ansible_host=54.123.45.67 ansible_user=admin ansible_ssh_private_key_file=~/.ssh/klinkr-key.pem
#
# ------------------------------------------------------------

# ------------------------------------------------------------
# ALTERNATIVE: If you need to override more settings per host
# ------------------------------------------------------------
# You can use the expanded format for clarity:
#
# [app_servers]
# vm1
#
# [app_servers:vars]
# ansible_user=admin
# ansible_ssh_private_key_file=~/.ssh/your-key.pem
#
# Then in group_vars/app_servers/vars.yml:
#   ansible_host: 54.123.45.67
#
# This separates static settings (user, key) from dynamic ones (IP)
# ------------------------------------------------------------


# ============================================================
# FUTURE: Additional Server Groups
# ============================================================
# When you add more servers, create new groups:
# ============================================================

# Example: Jenkins Server (VM2 - for CI/CD)
# [jenkins_servers]
# vm2 ansible_host=YOUR_VM2_IP ansible_user=admin ansible_ssh_private_key_file=~/.ssh/your-key.pem

# Example: Database Server
# [database_servers]
# db1 ansible_host=YOUR_DB_IP ansible_user=admin ansible_ssh_private_key_file=~/.ssh/db-key.pem

# Example: All servers in production
# [production:children]
# app_servers
# jenkins_servers
# database_servers


# ============================================================
# TESTING YOUR INVENTORY
# ============================================================
# After filling in your details, test the connection:
#
# 1. Verify Ansible can read the inventory:
#    ansible-inventory --list
#
# 2. Test SSH connection to VM1:
#    ansible vm1 -m ping
#
# 3. Run a simple command on VM1:
#    ansible vm1 -m shell -a "uptime"
#
# 4. Check all hosts in app_servers group:
#    ansible app_servers -m ping
#
# ============================================================

# ============================================================
# TROUBLESHOOTING
# ============================================================
#
# Error: "Failed to connect to the host via ssh"
# Fix:
#   - Verify VM1 is running (terraform output)
#   - Check IP is correct
#   - Check security group allows SSH from your IP
#   - Test manual SSH: ssh -i ~/.ssh/key.pem admin@IP
#
# Error: "Permission denied (publickey)"
# Fix:
#   - Check SSH key path is correct
#   - Check key permissions: chmod 400 ~/.ssh/key.pem
#   - Verify key name matches Terraform's ssh_key_name
#
# Error: "Host key verification failed"
# Fix:
#   - Set host_key_checking=False in ansible.cfg (already done)
#   - Or manually SSH once: ssh -i ~/.ssh/key.pem admin@IP
#
# ============================================================
