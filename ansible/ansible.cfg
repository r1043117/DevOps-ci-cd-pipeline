# ============================================================
# ANSIBLE CONFIGURATION FILE
# ============================================================
# This file tells Ansible how to behave and connect to servers.
# It's read automatically when you run ansible commands from this directory.
#
# Official docs: https://docs.ansible.com/ansible/latest/reference_appendices/config.html
# ============================================================

# ------------------------------------------------------------
# [defaults] - General Ansible Settings
# ------------------------------------------------------------
[defaults]

# INVENTORY FILE
# Where Ansible looks for the list of servers to manage
# Default: /etc/ansible/hosts (system-wide)
# We use: ./inventory.ini (local to this project)
inventory = ./inventory.ini

# REMOTE USER
# Which user account Ansible uses to connect to servers
# Debian default user is 'admin' (not 'root')
# This can be overridden per-host in inventory.ini
remote_user = admin

# HOST KEY CHECKING
# Whether to verify SSH host keys (like "Are you sure you want to continue?")
# - True: More secure, but asks for confirmation on first connection
# - False: Auto-accepts new hosts (convenient for automation)
# For learning/testing: False
# For production: True (recommended)
host_key_checking = False

# VAULT PASSWORD FILE
# Location of file containing the password to decrypt vault.yml
# This allows running playbooks without typing password each time
# WARNING: Keep this file secure! Add to .gitignore!
vault_password_file = ./.vault_pass.txt

# RETRY FILES
# Whether to create .retry files when playbook fails
# These files list failed hosts so you can retry just those
# - True: Creates files like site.retry
# - False: No retry files (cleaner workspace)
retry_files_enabled = False

# COMMAND WARNINGS
# Show warnings about deprecated features or better alternatives
# Useful for learning and keeping playbooks up-to-date
command_warnings = True

# INTERPRETER DISCOVERY
# How Ansible finds Python on remote systems
# - auto: Let Ansible figure it out (recommended)
# - auto_legacy: Old behavior (for compatibility)
interpreter_python = auto

# GATHERING FACTS
# Whether to collect system info (OS, IP, memory, etc.) before running tasks
# - smart: Only gather if not recently cached (faster)
# - implicit: Always gather (slower but more accurate)
# - explicit: Only when explicitly requested
gathering = smart

# FACT CACHING
# Store gathered facts to speed up subsequent runs
# - memory: Keep in RAM during playbook run
# - jsonfile: Save to disk for persistence
# - redis: Use Redis server (advanced)
fact_caching = memory

# CALLBACKS
# Enable/disable output plugins (what you see in terminal)
# Useful for customizing output format
stdout_callback = yaml
# Alternative: 'default', 'minimal', 'debug'

# COLORS
# Enable colored output in terminal
# Makes it easier to spot errors (red) vs success (green)
# Set to False if your terminal doesn't support colors
nocolor = False

# ------------------------------------------------------------
# [privilege_escalation] - Sudo/Root Access Settings
# ------------------------------------------------------------
[privilege_escalation]

# BECOME
# Whether to switch to another user (usually root) for privileged operations
# Like using 'sudo' in Linux
# Required for: installing packages, editing system files, starting services
become = True

# BECOME METHOD
# How to escalate privileges
# - sudo: Most common (requires user in sudoers)
# - su: Switch user (older method)
# - doas: OpenBSD alternative to sudo
become_method = sudo

# BECOME USER
# Which user to become (usually root for admin tasks)
become_user = root

# BECOME ASK PASS
# Whether to prompt for sudo password
# - True: Ask for password (more secure)
# - False: Assume passwordless sudo (convenient)
# Debian admin user has passwordless sudo by default, so False
become_ask_pass = False

# ------------------------------------------------------------
# [ssh_connection] - SSH Connection Settings
# ------------------------------------------------------------
[ssh_connection]

# SSH ARGUMENTS
# Additional SSH options for connections
# -o ControlMaster=auto: Reuse SSH connections (faster)
# -o ControlPersist=60s: Keep connections alive for 60 seconds
# -o ServerAliveInterval=60: Send keepalive every 60s (prevent timeout)
# -o ServerAliveCountMax=3: Disconnect after 3 failed keepalives
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o ServerAliveInterval=60 -o ServerAliveCountMax=3

# PIPELINING
# Send multiple commands in one SSH connection (much faster)
# Requires: sudo without requiretty (Debian default is fine)
# Benefit: Reduces SSH connections by ~80%
pipelining = True

# CONTROL PATH
# Where to store SSH connection control sockets
# %(directory)s = temp directory
# %h = hostname, %p = port, %r = remote user
# Keeps connection info for reuse
control_path = %(directory)s/ansible-ssh-%%h-%%p-%%r

# SSH TIMEOUT
# How long to wait for SSH connection before giving up (seconds)
# 30 seconds is reasonable for cloud servers
timeout = 30

# ------------------------------------------------------------
# [inventory] - Inventory Plugin Settings
# ------------------------------------------------------------
[inventory]

# ENABLE PLUGINS
# Which inventory formats Ansible should recognize
# - host_list: Simple comma-separated list
# - yaml: YAML inventory files
# - ini: INI format (we're using this)
# - auto: Try to detect format automatically
enable_plugins = host_list, yaml, ini, auto

# IGNORE EXTENSIONS
# File extensions to skip when looking for inventory
# Prevents reading backup files as inventory
ignore_extensions = .pyc, .pyo, .swp, .bak, ~, .rpm, .md, .txt, .rst

# ------------------------------------------------------------
# END OF CONFIGURATION
# ------------------------------------------------------------
